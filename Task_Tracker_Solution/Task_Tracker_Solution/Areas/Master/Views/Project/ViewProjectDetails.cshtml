@model Task_Tracker_Solution.Areas.Master.Models.ProjectViewModel
@using Newtonsoft.Json;
@using Task_Tracker_Solution.Utility
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "ProjectDetails";
}
@{
    ViewBag.Title = "ViewProjectDetails";
}

<script>
    function ddlEnvChange() {
        //alert(id);
        try {
            var env_syscode = $('#ddlEnv option:selected').val();
            if (env_syscode == 0) {
                bootbox.alert("Please select Enironment");
                return;
            }
        
            var form = $('#frmViewProjDetails');
            form.submit();

        } catch (e) {
            alert(e.message);
        }
    }
</script>
<div class="app-page-title">
    <div class="page-title-wrapper">
        <div class="page-title-heading">
            <div class="page-title-icon">
                <i class="pe-7s-portfolio icon-gradient bg-premium-dark">
                </i>
            </div>
            <div>View Project Details </div>
        </div>
    </div>
</div>


@using (Html.BeginForm("Post_ViewProjectDetails", "Project", FormMethod.Post, new { id = "frmViewProjDetails", enctype = "multipart/form-data" }))
{
<div class="main-card mb-2 card">

        <div class="card-body">
            <div class="form-row">
                <div class="col-md-12">
                    <div class="position-relative form-group">
                        <label class="mb-1">Project:</label>
                        <label for="exampleEmail11" class="">@Model.project_name</label>
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-md-12">
                        <div class="position-relative form-group">
                            <label for="exampleEmail11" class="">Environment: </label>
                            @Html.DropDownListFor(model => model.env_syscode, Model.SLEnvironment ?? new SelectList(new List<SelectListItem>() { }), "--Select Environment--",
                                    new
                                    {
                                        id = "ddlEnv",
                                        @class = "form-control select2",
                                        placeholder = "Select Environment",
                                        onchange = "ddlEnvChange(this);"
                                    })
                        </div>
                    </div>                 
                </div>
                <div style="display:none">
                    @Html.HiddenFor(model => model.project_syscode, new { @id = "hid_project_syscode" })
                    @Html.HiddenFor(model => model.project_name, new { @id = "hid_project_name" })
                    @Html.HiddenFor(model => model.env_syscode, new { @id = "hid_env_syscode" })
                </div>
            </div>
        </div>

</div>

    <div class="main-card mb-3 card">

        @if (Model != null && Model.project_syscode > 0 && Model.env_syscode > 0)
        {
            <div class="card-body">
                <h5 class="card-title">Project Details</h5>
                <table class="mb-0 table table-bordered table-striped" id="StepsTable">
                    <thead>
                        <tr>
                            <th class="text-center" style="width:10%">Sr. No</th>
                            <th style="width:20%">Parameter Name</th>
                            <th>Parameter Value</th>                           
                        </tr>
                    </thead>
                    <tbody>
                           @if (Model.lstProjDetails != null)
                           {
                               int rowCounter = 0;
                               foreach (var detail in Model.lstProjDetails)
                               {
                                   rowCounter = ++rowCounter;
                                    <tr>

                                        <td class="text-center">@rowCounter</td>
                                        <td>
                                            @Html.DisplayFor(model => detail.parameter_name, new { @id = "param_value", @class = "form-control" })
                                        </td>
                                        <td>
                                            @Html.DisplayFor(model => detail.parameter_value, new { @id = "param_value", @class = "form-control" }) 
                                            @Html.HiddenFor(model => detail.details_syscode, new { @id = "details_syscode" })
                                        </td>
                                    </tr>
                               }
                           }
                        
                    </tbody>
                </table>
               
          
            </div>
        }
    </div>
}

